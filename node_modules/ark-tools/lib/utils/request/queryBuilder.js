"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var R = _interopRequireWildcard(require("ramda"));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }

var keyType = function keyType(_ref) {
  var key = _ref.key,
      data = _ref.data;
  return R.pipe(R.prop(key), R.type)(data);
};

var columnFilterDataBuilder = function columnFilterDataBuilder(_ref2) {
  var data = _ref2.data,
      _ref2$columnFilterNam = _ref2.columnFilterName,
      columnFilterName = _ref2$columnFilterNam === void 0 ? "ColumnFilter_" : _ref2$columnFilterNam;
  return R.pipe(R.head, R.keys, R.map(function (key) {
    return "".concat(columnFilterName).concat(key, "=").concat(R.path([key, "value"], data[0]));
  }), R.join("&"))(data);
};

var objDataBuilder = function objDataBuilder(_ref3) {
  var data = _ref3.data;
  return R.pipe(R.keys, R.map(function (key) {
    return "".concat(key, "=").concat(encodeURIComponent(R.prop(key, data)));
  }), R.join("&"))(data);
};

var simpleDataBuilder = function simpleDataBuilder(_ref4) {
  var key = _ref4.key,
      data = _ref4.data;

  switch (R.type(data[0])) {
    case "Object":
      return R.pipe(R.map(function (_ref5) {
        var value = _ref5.value;
        return "".concat(key, "=").concat(encodeURIComponent(value));
      }), R.values, R.join("&"))(data);

    case "Number":
    case "String":
      return R.pipe(R.map(function (value) {
        return "".concat(key, "=").concat(encodeURIComponent(value));
      }), R.join("&"))(data);

    default:
      return "";
  }
};

var arrDataBuilder = function arrDataBuilder(_ref6) {
  var key = _ref6.key,
      data = _ref6.data,
      columnFilterName = _ref6.columnFilterName;
  return R.equals(key, "columnFilters") ? columnFilterDataBuilder({
    columnFilterName: columnFilterName,
    data: data
  }) : simpleDataBuilder({
    key: key,
    data: data
  });
};

var builder = function builder(_ref7) {
  var key = _ref7.key,
      data = _ref7.data,
      columnFilterName = _ref7.columnFilterName;

  switch (keyType({
    key: key,
    data: data
  })) {
    case "Array":
      return arrDataBuilder({
        key: key,
        columnFilterName: columnFilterName,
        data: R.prop(key, data)
      });

    case "Object":
      return objDataBuilder({
        data: R.prop(key, data)
      });

    case "Number":
    case "String":
      return "".concat(key, "=").concat(encodeURIComponent(R.prop(key, data)));

    default:
      return "";
  }
};

var queryStringBuilder = function queryStringBuilder(_ref8) {
  var filters = _ref8.filters,
      columnFilterName = _ref8.columnFilterName;
  return R.pipe(R.filter(function (x) {
    return x;
  }), R.keys, R.map(function (key) {
    return builder({
      key: key,
      data: filters,
      columnFilterName: columnFilterName
    });
  }), R.filter(function (x) {
    return x;
  }), R.join("&"))(filters);
};

var _default = queryStringBuilder;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy9yZXF1ZXN0L3F1ZXJ5QnVpbGRlci50cyJdLCJuYW1lcyI6WyJrZXlUeXBlIiwia2V5IiwiZGF0YSIsIlIiLCJwaXBlIiwicHJvcCIsInR5cGUiLCJjb2x1bW5GaWx0ZXJEYXRhQnVpbGRlciIsImNvbHVtbkZpbHRlck5hbWUiLCJoZWFkIiwia2V5cyIsIm1hcCIsInBhdGgiLCJqb2luIiwib2JqRGF0YUJ1aWxkZXIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzaW1wbGVEYXRhQnVpbGRlciIsInZhbHVlIiwidmFsdWVzIiwiYXJyRGF0YUJ1aWxkZXIiLCJlcXVhbHMiLCJidWlsZGVyIiwicXVlcnlTdHJpbmdCdWlsZGVyIiwiZmlsdGVycyIsImZpbHRlciIsIngiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLElBQU1BLE9BQU8sR0FBRyxTQUFWQSxPQUFVO0FBQUEsTUFBR0MsR0FBSCxRQUFHQSxHQUFIO0FBQUEsTUFBUUMsSUFBUixRQUFRQSxJQUFSO0FBQUEsU0FDZEMsQ0FBQyxDQUFDQyxJQUFGLENBQ0VELENBQUMsQ0FBQ0UsSUFBRixDQUFpQkosR0FBakIsQ0FERixFQUVFRSxDQUFDLENBQUNHLElBRkosRUFHRUosSUFIRixDQURjO0FBQUEsQ0FBaEI7O0FBTUEsSUFBTUssdUJBQXVCLEdBQUcsU0FBMUJBLHVCQUEwQjtBQUFBLE1BQzlCTCxJQUQ4QixTQUM5QkEsSUFEOEI7QUFBQSxvQ0FFOUJNLGdCQUY4QjtBQUFBLE1BRTlCQSxnQkFGOEIsc0NBRVgsZUFGVztBQUFBLFNBTzlCTCxDQUFDLENBQUNDLElBQUYsQ0FDRUQsQ0FBQyxDQUFDTSxJQURKLEVBRUVOLENBQUMsQ0FBQ08sSUFGSixFQUdFUCxDQUFDLENBQUNRLEdBQUYsQ0FDRSxVQUFBVixHQUFHO0FBQUEscUJBQU9PLGdCQUFQLFNBQTBCUCxHQUExQixjQUFpQ0UsQ0FBQyxDQUFDUyxJQUFGLENBQU8sQ0FBQ1gsR0FBRCxFQUFNLE9BQU4s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ZnJvbSBcInJhbWRhXCI7XHJcblxyXG5jb25zdCBrZXlUeXBlID0gKHsga2V5LCBkYXRhIH06IHsga2V5OiBzdHJpbmc7IGRhdGE6IGFueSB9KSA9PlxyXG4gIFIucGlwZShcclxuICAgIFIucHJvcDxhbnksIGFueT4oa2V5KSxcclxuICAgIFIudHlwZVxyXG4gICkoZGF0YSk7XHJcblxyXG5jb25zdCBjb2x1bW5GaWx0ZXJEYXRhQnVpbGRlciA9ICh7XHJcbiAgZGF0YSxcclxuICBjb2x1bW5GaWx0ZXJOYW1lID0gXCJDb2x1bW5GaWx0ZXJfXCJcclxufToge1xyXG4gIGRhdGE6IGFueTtcclxuICBjb2x1bW5GaWx0ZXJOYW1lPzogc3RyaW5nO1xyXG59KSA9PlxyXG4gIFIucGlwZShcclxuICAgIFIuaGVhZCxcclxuICAgIFIua2V5cyxcclxuICAgIFIubWFwKFxyXG4gICAgICBrZXkgPT4gYCR7Y29sdW1uRmlsdGVyTmFtZX0ke2tleX09JHtSLnBhdGgoW2tleSwgXCJ2YWx1ZVwiXSwgZGF0YVswXSl9YFxyXG4gICAgKSxcclxuICAgIFIuam9pbihcIiZcIilcclxuICApKGRhdGEpO1xyXG5cclxuY29uc3Qgb2JqRGF0YUJ1aWxkZXIgPSAoeyBkYXRhIH06IHsgZGF0YTogYW55IH0pID0+XHJcbiAgUi5waXBlKFxyXG4gICAgUi5rZXlzLFxyXG4gICAgUi5tYXAoKGtleTogYW55KSA9PiBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KFIucHJvcChrZXksIGRhdGEpKX1gKSxcclxuICAgIFIuam9pbihcIiZcIilcclxuICApKGRhdGEpO1xyXG5cclxuY29uc3Qgc2ltcGxlRGF0YUJ1aWxkZXIgPSAoeyBrZXksIGRhdGEgfTogeyBrZXk6IHN0cmluZzsgZGF0YTogYW55IH0pID0+IHtcclxuICBzd2l0Y2ggKFIudHlwZShkYXRhWzBdKSkge1xyXG4gICAgY2FzZSBcIk9iamVjdFwiOlxyXG4gICAgICByZXR1cm4gUi5waXBlKFxyXG4gICAgICAgIFIubWFwKFxyXG4gICAgICAgICAgKHsgdmFsdWUgfTogeyB2YWx1ZTogc3RyaW5nIH0pID0+XHJcbiAgICAgICAgICAgIGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWBcclxuICAgICAgICApLFxyXG4gICAgICAgIFIudmFsdWVzLFxyXG4gICAgICAgIFIuam9pbihcIiZcIilcclxuICAgICAgKShkYXRhKTtcclxuICAgIGNhc2UgXCJOdW1iZXJcIjpcclxuICAgIGNhc2UgXCJTdHJpbmdcIjpcclxuICAgICAgcmV0dXJuIFIucGlwZShcclxuICAgICAgICBSLm1hcCgodmFsdWU6IGFueSkgPT4gYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YCksXHJcbiAgICAgICAgUi5qb2luKFwiJlwiKVxyXG4gICAgICApKGRhdGEpO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG59O1xyXG5jb25zdCBhcnJEYXRhQnVpbGRlciA9ICh7XHJcbiAga2V5LFxyXG4gIGRhdGEsXHJcbiAgY29sdW1uRmlsdGVyTmFtZVxyXG59OiB7XHJcbiAga2V5OiBzdHJpbmc7XHJcbiAgZGF0YTogYW55O1xyXG4gIGNvbHVtbkZpbHRlck5hbWU/OiBzdHJpbmc7XHJcbn0pID0+XHJcbiAgUi5lcXVhbHMoa2V5LCBcImNvbHVtbkZpbHRlcnNcIilcclxuICAgID8gY29sdW1uRmlsdGVyRGF0YUJ1aWxkZXIoeyBjb2x1bW5GaWx0ZXJOYW1lLCBkYXRhIH0pXHJcbiAgICA6IHNpbXBsZURhdGFCdWlsZGVyKHsga2V5LCBkYXRhIH0pO1xyXG5cclxuY29uc3QgYnVpbGRlciA9ICh7XHJcbiAga2V5LFxyXG4gIGRhdGEsXHJcbiAgY29sdW1uRmlsdGVyTmFtZVxyXG59OiB7XHJcbiAga2V5OiBzdHJpbmc7XHJcbiAgZGF0YTogYW55O1xyXG4gIGNvbHVtbkZpbHRlck5hbWU/OiBzdHJpbmc7XHJcbn0pID0+IHtcclxuICBzd2l0Y2ggKGtleVR5cGUoeyBrZXksIGRhdGEgfSkpIHtcclxuICAgIGNhc2UgXCJBcnJheVwiOlxyXG4gICAgICByZXR1cm4gYXJyRGF0YUJ1aWxkZXIoeyBrZXksIGNvbHVtbkZpbHRlck5hbWUsIGRhdGE6IFIucHJvcChrZXksIGRhdGEpIH0pO1xyXG4gICAgY2FzZSBcIk9iamVjdFwiOlxyXG4gICAgICByZXR1cm4gb2JqRGF0YUJ1aWxkZXIoeyBkYXRhOiBSLnByb3Aoa2V5LCBkYXRhKSB9KTtcclxuICAgIGNhc2UgXCJOdW1iZXJcIjpcclxuICAgIGNhc2UgXCJTdHJpbmdcIjpcclxuICAgICAgcmV0dXJuIGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQoUi5wcm9wKGtleSwgZGF0YSkpfWA7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBxdWVyeVN0cmluZ0J1aWxkZXIgPSAoe1xyXG4gIGZpbHRlcnMsXHJcbiAgY29sdW1uRmlsdGVyTmFtZVxyXG59OiB7XHJcbiAgZmlsdGVyczogYW55O1xyXG4gIGNvbHVtbkZpbHRlck5hbWU/OiBzdHJpbmc7XHJcbn0pID0+XHJcbiAgUi5waXBlKFxyXG4gICAgUi5maWx0ZXIoKHg6IGFueSkgPT4geCksXHJcbiAgICBSLmtleXMsXHJcbiAgICBSLm1hcCgoa2V5OiBhbnkpID0+IGJ1aWxkZXIoeyBrZXksIGRhdGE6IGZpbHRlcnMsIGNvbHVtbkZpbHRlck5hbWUgfSkpLFxyXG4gICAgUi5maWx0ZXIoKHg6IGFueSkgPT4geCksXHJcbiAgICBSLmpvaW4oXCImXCIpXHJcbiAgKShmaWx0ZXJzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHF1ZXJ5U3RyaW5nQnVpbGRlcjtcclxuIl19